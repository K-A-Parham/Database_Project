CREATE TABLE [STAGES] (
  [STAGE_ID] INT,
  [TYPE] VARCHAR(50),
  PRIMARY KEY ([STAGE_ID])
);

CREATE TABLE [PAYMENT_METHOD] (
  [METHOD_ID] INT,
  [TYPE] VARCHAR(50), 
  PRIMARY KEY ([METHOD_ID])
);

CREATE TABLE [CUSTOMER] (
  [CUSTOMER_ID] INT,
  [REG_STATUS] VARCHAR,
  [POINTS] INT,
  PRIMARY KEY ([CUSTOMER_ID])
);

CREATE TABLE [ORDERS] (
  [ORDER_ID] INT,
  [DATE] DATE,
  [TOTAL_AMOUNT] DECIMAL(10, 2),
  [STAGE_ID] INT,
  [METHOD_ID] INT,
  [CUSTOMER_ID] INT,
  PRIMARY KEY ([ORDER_ID]),
  FOREIGN KEY ([STAGE_ID]) REFERENCES STAGES([STAGE_ID]),
  FOREIGN KEY ([METHOD_ID]) REFERENCES PAYMENT_METHOD([METHOD_ID]),
  FOREIGN KEY ([CUSTOMER_ID]) REFERENCES CUSTOMER([CUSTOMER_ID])
);



CREATE TABLE [ORDER_DETAIL] (
  [ORDER_ID] INT, -- Replace INT with the appropriate data type
  [ITEM_ID] INT, -- Replace INT with the appropriate data type
  [SELLING_PRICE] DECIMAL(10, 2), -- Replace DECIMAL(10, 2) with the appropriate data type
  [STAGE_ID] INT, -- Replace INT with the appropriate data type
  PRIMARY KEY ([ORDER_ID], [ITEM_ID]),
  FOREIGN KEY ([ITEM_ID]) REFERENCES ITEMS([ITEM_ID]),
  FOREIGN KEY ([STAGE_ID]) REFERENCES STAGES([STAGE_ID])
);



CREATE TABLE [ITEMS] (
  [ITEM_ID] INT,
  [NAME] VARCHAR(50),
  [SERVING_SIZE] VARCHAR(20), -- Replace VARCHAR(20) with the appropriate data type
  [CURRENT_PRICE] DECIMAL(10, 2),
  [SUB_CAT_ID] INT,
  [CATEGORY_ID] INT,
  PRIMARY KEY ([ITEM_ID]),
  FOREIGN KEY ([SUB_CAT_ID]) REFERENCES PRODUCT_SUB_CATEGORY([SUB_CAT_ID]),
  FOREIGN KEY ([CATEGORY_ID]) REFERENCES PRODUCT_CATEGORY([CATEGORY_ID])
);


CREATE TABLE [PRODUCT_CATEGORY] (
  [CATEGORY_ID] INT,
  [DESCRIPTION] VARCHAR(50),
  PRIMARY KEY ([CATEGORY_ID])
);


CREATE TABLE [PRODUCT_SUB_CATEGORY] (
  [SUB_CAT_ID] INT,
  [DESCRIPTION] VARCHAR(50),
  [CATEGORY_ID] INT, -- Corrected column name
  PRIMARY KEY ([SUB_CAT_ID]),
  FOREIGN KEY ([CATEGORY_ID]) REFERENCES PRODUCT_CATEGORY([CATEGORY_ID])
);





ALTER TABLE [ORDER_DETAIL]
ADD FOREIGN KEY ([ORDER_ID]) REFERENCES ORDERS([ORDER_ID]);

CREATE TABLE [COUPONS] (
  [COUPON_ID] INT, -- Replace INT with the appropriate data type
  [DISCOUNT] DECIMAL(5, 2), -- Replace DECIMAL(5, 2) with the appropriate data type
  [EXP_DATE] DATE, -- Replace DATE with the appropriate data type
  [CUSTOMER_ID] INT, -- Replace INT with the appropriate data type
  PRIMARY KEY ([COUPON_ID]),
  FOREIGN KEY ([CUSTOMER_ID]) REFERENCES CUSTOMER([CUSTOMER_ID])
);

CREATE TABLE [PAYMENT] (
  [PAYMENT_ID] INT,
  [AMOUNT] DECIMAL(10, 2), 
  [COUPON_USED] BIT,
  [RATING] INT,
  [METHOD_ID] INT,
  [COUPON_ID] INT,
  PRIMARY KEY ([PAYMENT_ID]),
  FOREIGN KEY ([METHOD_ID]) REFERENCES PAYMENT_METHOD([METHOD_ID]),
  FOREIGN KEY ([COUPON_ID]) REFERENCES COUPONS([COUPON_ID])
);
